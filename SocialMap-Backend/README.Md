SocialMap API
=========

# fazer
- Ajeita o web socket



## Feactures
<ul>
<li>Autentifica√ß√£o com JWT e encriptografia de senha</li>
<li>Helmet - para prote√ß√£o</li>
<li>Swagger - Cria√ß√£o da documenta√ß√£o</li>
<li>Morgan - Cria√ß√£o de Logs para cada inicia√ß√£o do server</li>
<li>Websocket - Para alerta de notfica√ß√µes</li>
<li>RabbitMQ - Exchange para Notifica√ß√µes</li>
</ul>

# Mensageria
- Exchange do tipo 'direct' pra notifica√ß√µes
- Filas para cada tipo de notifica√ß√£o tratada
- A seguir um esquema do funcionamento:
<p align="center">
<img width="450" style="border-radius: 5px" height="400" src="./midias/rabbit.gif" alt="Intro">
</p>

# Requisitos
- Adicionar usu√°rio do Sysmap com a descri√ß√£o da empresa no inicio do feed

# Personaliza√ß√µes
- query no get post/:id para n pegar todos os seguidores de todo mundo que comentou
economizando no backend
- Post com midia e texto
- Usando a lib ampqlib para rabbitMQ
- Criando exchange e filas no c√≥digo
- Adiconou o campo de posts no profile
- Usando o addToSet em vez do push para evitar duplica√ß√£o de likes ou seguidores
```
{ $addToSet: { following: id_two }
```
- Populando apenas os campos desejados para economizar no tr√°fego de dados
```
.populate('profile', ['name', 'midia'])
.populate({ path: 'comments', populate: { path: 'profile', select: ['name' 'midia'] } })
```

        
# üé≤ Para Rodar o Back End

# Docker
* Entrar na pasta
```shell
$ cd SocialMap-Backend
```
* Buildar os containers
```shell
$ docker-compose build
```

* Iniciar os containers
```shell
$ docker-compose up
```

* Crie um database chamado 'main' no mongodb

